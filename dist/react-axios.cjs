"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const S=require("react/jsx-runtime"),u=require("react"),y=require("axios"),f=u.createContext(void 0);function A(){const e=u.useContext(f);if(!e)throw new Error("useAxiosInstance must be used within an AxiosProvider");return e}function L({children:e,baseURL:o,withCredentials:n}){const[s,c]=u.useState(),x=(i,t)=>{c(r=>({...r,[i]:t}))},l=i=>{c(t=>{const r={...t};return delete r[i],r})},g=u.useMemo(()=>y.create({baseURL:o,withCredentials:n,headers:s}),[o,n,s]);return S.jsx(f.Provider,{value:{instance:g,addHeader:x,removeHeader:l},children:e})}function d(e){const{instance:o}=A(),[n,s]=u.useState(!1),[c,x]=u.useState(),[l,g]=u.useState(0);return{data:c,isLoading:n,execute:async(t={})=>{var r,P;try{s(!0);const a=await o.request({url:e.path||t.path,method:e.method,...["get","delete"].includes(e.method.toLowerCase())&&{params:t.data},...["post","put"].includes(e.method.toLowerCase())&&{data:t.data},...t.responseType&&{responseType:t.responseType},onUploadProgress:h=>{if(h.total){const v=Math.round(h.loaded*100/h.total);g(v),t.onProgress&&t.onProgress(v)}}});return t.onSuccess&&t.onSuccess(a.data),x(a.data),s(!1),a.data}catch(a){t.onError&&t.onError(((P=(r=a.response)==null?void 0:r.data)==null?void 0:P.message)||a.message),s(!1);return}},progress:l}}function m(e){const{data:o,execute:n,isLoading:s}=d({...e,method:"get"});return{data:o,isLoading:s,execute:n}}function q(e){const{data:o,execute:n,isLoading:s,progress:c}=d({...e,method:"post"});return{data:o,isLoading:s,execute:n,progress:c}}function w(e){const{data:o,execute:n,isLoading:s}=d({...e,method:"put"});return{data:o,isLoading:s,execute:n}}function C(e){const{data:o,execute:n,isLoading:s}=d({...e,method:"delete"});return{data:o,isLoading:s,execute:n}}exports.AxiosContext=f;exports.AxiosProvider=L;exports.useAxios=A;exports.useDelete=C;exports.useGet=m;exports.usePost=q;exports.usePut=w;exports.useRequest=d;
